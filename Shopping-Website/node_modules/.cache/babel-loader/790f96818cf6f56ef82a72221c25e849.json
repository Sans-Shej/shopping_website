{"ast":null,"code":"import { createVNode as _createVNode, mergeProps as _mergeProps, Fragment as _Fragment } from \"vue\"; // Styles\n\nimport \"./VCarousel.css\"; // Components\n\nimport { makeVWindowProps, VWindow } from \"../VWindow/VWindow.mjs\";\nimport { VBtn } from \"../VBtn/index.mjs\";\nimport { VDefaultsProvider } from \"../VDefaultsProvider/index.mjs\";\nimport { VProgressLinear } from \"../VProgressLinear/index.mjs\"; // Composables\n\nimport { IconValue } from \"../../composables/icons.mjs\";\nimport { useLocale } from \"../../composables/locale.mjs\";\nimport { useProxiedModel } from \"../../composables/proxiedModel.mjs\"; // Utilities\n\nimport { convertToUnit, genericComponent, useRender } from \"../../util/index.mjs\";\nimport { onMounted, ref, watch } from 'vue'; // Types\n\nexport const VCarousel = genericComponent()({\n  name: 'VCarousel',\n  props: {\n    color: String,\n    cycle: Boolean,\n    delimiterIcon: {\n      type: IconValue,\n      default: '$delimiter'\n    },\n    height: {\n      type: [Number, String],\n      default: 500\n    },\n    hideDelimiters: Boolean,\n    hideDelimiterBackground: Boolean,\n    interval: {\n      type: [Number, String],\n      default: 6000,\n      validator: value => Number(value) > 0\n    },\n    progress: [Boolean, String],\n    verticalDelimiters: [Boolean, String],\n    ...makeVWindowProps({\n      continuous: true,\n      mandatory: 'force',\n      showArrows: true\n    })\n  },\n  emits: {\n    'update:modelValue': val => true\n  },\n\n  setup(props, _ref) {\n    let {\n      slots\n    } = _ref;\n    const model = useProxiedModel(props, 'modelValue');\n    const {\n      t\n    } = useLocale();\n    const windowRef = ref();\n    let slideTimeout = -1;\n    watch(model, restartTimeout);\n    watch(() => props.interval, restartTimeout);\n    watch(() => props.cycle, val => {\n      if (val) restartTimeout();else window.clearTimeout(slideTimeout);\n    });\n    onMounted(startTimeout);\n\n    function startTimeout() {\n      if (!props.cycle || !windowRef.value) return;\n      slideTimeout = window.setTimeout(windowRef.value.group.next, +props.interval > 0 ? +props.interval : 6000);\n    }\n\n    function restartTimeout() {\n      window.clearTimeout(slideTimeout);\n      window.requestAnimationFrame(startTimeout);\n    }\n\n    useRender(() => _createVNode(VWindow, {\n      \"ref\": windowRef,\n      \"modelValue\": model.value,\n      \"onUpdate:modelValue\": $event => model.value = $event,\n      \"class\": ['v-carousel', {\n        'v-carousel--hide-delimiter-background': props.hideDelimiterBackground,\n        'v-carousel--vertical-delimiters': props.verticalDelimiters\n      }],\n      \"style\": {\n        height: convertToUnit(props.height)\n      },\n      \"continuous\": true,\n      \"mandatory\": \"force\",\n      \"showArrows\": props.showArrows\n    }, {\n      default: slots.default,\n      additional: _ref2 => {\n        let {\n          group\n        } = _ref2;\n        return _createVNode(_Fragment, null, [!props.hideDelimiters && _createVNode(\"div\", {\n          \"class\": \"v-carousel__controls\",\n          \"style\": {\n            left: props.verticalDelimiters === 'left' && props.verticalDelimiters ? 0 : 'auto',\n            right: props.verticalDelimiters === 'right' ? 0 : 'auto'\n          }\n        }, [group.items.value.length > 0 && _createVNode(VDefaultsProvider, {\n          \"defaults\": {\n            VBtn: {\n              color: props.color,\n              icon: props.delimiterIcon,\n              size: 'x-small',\n              variant: 'text'\n            }\n          },\n          \"scoped\": true\n        }, {\n          default: () => [group.items.value.map((item, index) => {\n            const props = {\n              id: `carousel-item-${item.id}`,\n              'aria-label': t('$vuetify.carousel.ariaLabel.delimiter', index + 1, group.items.value.length),\n              class: [group.isSelected(item.id) && 'v-btn--active'],\n              onClick: () => group.select(item.id, true)\n            };\n            return slots.item ? slots.item({\n              props,\n              item\n            }) : _createVNode(VBtn, _mergeProps(item, props), null);\n          })]\n        })]), props.progress && _createVNode(VProgressLinear, {\n          \"class\": \"v-carousel__progress\",\n          \"color\": typeof props.progress === 'string' ? props.progress : undefined,\n          \"modelValue\": (group.getItemIndex(model.value) + 1) / group.items.value.length * 100\n        }, null)]);\n      },\n      prev: slots.prev,\n      next: slots.next\n    }));\n    return {};\n  }\n\n});","map":{"version":3,"mappings":"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","names":["makeVWindowProps","VWindow","VBtn","VDefaultsProvider","VProgressLinear","IconValue","useLocale","useProxiedModel","convertToUnit","genericComponent","useRender","onMounted","ref","watch","VCarousel","name","props","color","String","cycle","Boolean","delimiterIcon","type","default","height","Number","hideDelimiters","hideDelimiterBackground","interval","validator","value","progress","verticalDelimiters","continuous","mandatory","showArrows","emits","val","setup","_ref","slots","model","t","windowRef","slideTimeout","restartTimeout","window","clearTimeout","startTimeout","setTimeout","group","next","requestAnimationFrame","$event","additional","_ref2","_createVNode","left","right","items","length","icon","size","variant","map","item","index","id","class","isSelected","onClick","select","undefined","getItemIndex","prev"],"sources":["../../../src/components/VCarousel/VCarousel.tsx"],"sourcesContent":["// Styles\nimport './VCarousel.sass'\n\n// Components\nimport { makeVWindowProps, VWindow } from '@/components/VWindow/VWindow'\nimport { VBtn } from '@/components/VBtn'\nimport { VDefaultsProvider } from '@/components/VDefaultsProvider'\nimport { VProgressLinear } from '@/components/VProgressLinear'\n\n// Composables\nimport { IconValue } from '@/composables/icons'\nimport { useLocale } from '@/composables/locale'\nimport { useProxiedModel } from '@/composables/proxiedModel'\n\n// Utilities\nimport { convertToUnit, genericComponent, useRender } from '@/util'\nimport { onMounted, ref, watch } from 'vue'\n\n// Types\nimport type { GroupProvide } from '@/composables/group'\nimport type { PropType } from 'vue'\nimport type { VWindowSlots } from '../VWindow/VWindow'\n\nexport const VCarousel = genericComponent<VWindowSlots>()({\n  name: 'VCarousel',\n\n  props: {\n    color: String,\n    cycle: Boolean,\n    delimiterIcon: {\n      type: IconValue,\n      default: '$delimiter',\n    },\n    height: {\n      type: [Number, String],\n      default: 500,\n    },\n    hideDelimiters: Boolean,\n    hideDelimiterBackground: Boolean,\n    interval: {\n      type: [Number, String],\n      default: 6000,\n      validator: (value: string | number) => Number(value) > 0,\n    },\n    progress: [Boolean, String],\n    verticalDelimiters: [Boolean, String] as PropType<boolean | 'left' | 'right'>,\n\n    ...makeVWindowProps({\n      continuous: true,\n      mandatory: 'force' as const,\n      showArrows: true,\n    }),\n  },\n\n  emits: {\n    'update:modelValue': (val: any) => true,\n  },\n\n  setup (props, { slots }) {\n    const model = useProxiedModel(props, 'modelValue')\n    const { t } = useLocale()\n    const windowRef = ref<typeof VWindow>()\n\n    let slideTimeout = -1\n    watch(model, restartTimeout)\n    watch(() => props.interval, restartTimeout)\n    watch(() => props.cycle, val => {\n      if (val) restartTimeout()\n      else window.clearTimeout(slideTimeout)\n    })\n\n    onMounted(startTimeout)\n\n    function startTimeout () {\n      if (!props.cycle || !windowRef.value) return\n\n      slideTimeout = window.setTimeout(windowRef.value.group.next, +props.interval > 0 ? +props.interval : 6000)\n    }\n\n    function restartTimeout () {\n      window.clearTimeout(slideTimeout)\n      window.requestAnimationFrame(startTimeout)\n    }\n\n    useRender(() => (\n      <VWindow\n        ref={ windowRef }\n        v-model={ model.value }\n        class={[\n          'v-carousel',\n          {\n            'v-carousel--hide-delimiter-background': props.hideDelimiterBackground,\n            'v-carousel--vertical-delimiters': props.verticalDelimiters,\n          },\n        ]}\n        style={{ height: convertToUnit(props.height) }}\n        continuous\n        mandatory=\"force\"\n        showArrows={ props.showArrows }\n      >\n        {{\n          default: slots.default,\n          additional: ({ group }: { group: GroupProvide }) => (\n            <>\n              { !props.hideDelimiters && (\n                <div\n                  class=\"v-carousel__controls\"\n                  style={{\n                    left: props.verticalDelimiters === 'left' && props.verticalDelimiters ? 0 : 'auto',\n                    right: props.verticalDelimiters === 'right' ? 0 : 'auto',\n                  }}\n                >\n                  { group.items.value.length > 0 && (\n                    <VDefaultsProvider\n                      defaults={{\n                        VBtn: {\n                          color: props.color,\n                          icon: props.delimiterIcon,\n                          size: 'x-small',\n                          variant: 'text',\n                        },\n                      }}\n                      scoped\n                    >\n                      { group.items.value.map((item, index) => {\n                        const props = {\n                          id: `carousel-item-${item.id}`,\n                          'aria-label': t('$vuetify.carousel.ariaLabel.delimiter', index + 1, group.items.value.length),\n                          class: [group.isSelected(item.id) && 'v-btn--active'],\n                          onClick: () => group.select(item.id, true),\n                        }\n\n                        return slots.item\n                          ? slots.item({ props, item })\n                          : (<VBtn { ...item } { ...props } />)\n                      })}\n                    </VDefaultsProvider>\n                  )}\n                </div>\n              )}\n\n              { props.progress && (\n                <VProgressLinear\n                  class=\"v-carousel__progress\"\n                  color={ typeof props.progress === 'string' ? props.progress : undefined }\n                  modelValue={ (group.getItemIndex(model.value) + 1) / group.items.value.length * 100 }\n                />\n              )}\n            </>\n          ),\n          prev: slots.prev,\n          next: slots.next,\n        }}\n      </VWindow>\n    ))\n\n    return {}\n  },\n})\n\nexport type VCarousel = InstanceType<typeof VCarousel>\n"]},"metadata":{},"sourceType":"module"}